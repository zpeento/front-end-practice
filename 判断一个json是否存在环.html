<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>判断一个json是否存在环</title>
</head>
<body>
	<script>
		var a = {
			b:0,
			c:{
				d:{
					f:2
				},
				e:{
					g:null
				}
			}
		}

		a.c.e.g = a.c.e
		// a.c.d.f = a.b

		var cache = [];
		var hasCircle = false

		function cycleDetector(obj) {
			for(var key in obj){
				if(typeof obj[key] == 'object') {
					if(cache.indexOf(obj[key]) != -1) {
						hasCircle = true;
						return
					} else {
						cache.push(obj[key]);
						cycleDetector(obj[key])
					}
				} else {
					if(cache.length != 0) {
						cache.pop()
					}					
				}
			}			
		}

		cycleDetector(a)
		console.log(hasCircle)
	</script>
</body>
</html>